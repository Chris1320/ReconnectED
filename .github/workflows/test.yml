---
name: Tests - Web
permissions:
    contents: read
    pull-requests: read

on:
    push:
        branches:
            - main
            - stable
    pull_request:
        paths:
            - "ReconnectED-web/**"
    workflow_dispatch:

concurrency:
    group: ${{ github.workflow }}-${{ github.event.number || github.sha }}
    cancel-in-progress: true

jobs:
    test-web:
        name: Test - Web
        runs-on: ubuntu-latest
        defaults:
            run:
                working-directory: ${{ github.workspace }}/ReconnectED-web

        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Setup Bun
              uses: oven-sh/setup-bun@v2
              with:
                  bun-version-file: "${{ github.workspace }}/ReconnectED-web/bun.lock"

            - name: Install dependencies
              run: bun install

            - name: Build with Next.js
              run: bun run build
